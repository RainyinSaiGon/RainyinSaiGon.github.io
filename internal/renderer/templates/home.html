{{define "home"}}<!DOCTYPE html>
<html lang="en">
<head>
    {{template "head" .}}
    <title>RainyinSaiGon</title>
    <meta name="description" content="Software engineering, cloud, and explainable AI — by RainyinSaiGon, a developer at VNU-HCM.">
    <meta property="og:title" content="RainyinSaiGon">
    <meta property="og:description" content="Software engineering, cloud, and explainable AI — by RainyinSaiGon, a developer at VNU-HCM.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rainyinsaigon.github.io/">
    <meta name="twitter:card" content="summary">
</head>
<body class="font-sans text-gray-900 bg-white dark:bg-gray-950 dark:text-gray-100">

    <!-- HERO -->
    <div class="hero-bg">
        {{template "nav-home" .}}
        <div class="flex items-center justify-between max-w-5xl mx-auto px-10 pb-20 pt-12 gap-10 flex-wrap">
            <div class="flex-1 min-w-[280px]">
                <h1 class="text-5xl font-black leading-tight mb-5 text-gray-900 dark:text-white">Hi, I'm RainyinSaiGon</h1>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-md mb-2">I work at the intersection of software engineering, databases, performance, and Explainable AI.</p>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-md">This is where I share my projects and thoughts on building systems that are fast, reliable, and understandable.</p>
                <div class="flex gap-4 mt-9 flex-wrap">
                    <a class="inline-flex items-center gap-2 text-white px-6 py-3 rounded-lg font-semibold text-sm hover:opacity-90 transition-opacity" style="background:#1a6eb5" href="/blog">My blog</a>
                    <a class="inline-flex items-center gap-2 border-2 px-6 py-3 rounded-lg font-semibold text-sm hover:opacity-80 transition-opacity dark:border-blue-400 dark:text-blue-300" style="border-color:#1a6eb5;color:#1a6eb5" href="/works">My projects</a>
                </div>
            </div>
            <!-- Terminal animation -->
            <div class="shrink-0 w-full max-w-sm rounded-xl overflow-hidden shadow-2xl" style="background:#0f172a;font-family:'Cascadia Code','JetBrains Mono','Fira Code',monospace">
                <!-- Title bar -->
                <div class="flex items-center gap-2 px-4 py-3" style="background:#1e293b">
                    <span class="w-3 h-3 rounded-full inline-block" style="background:#ff5f57"></span>
                    <span class="w-3 h-3 rounded-full inline-block" style="background:#febc2e"></span>
                    <span class="w-3 h-3 rounded-full inline-block" style="background:#28c840"></span>
                    <span class="ml-3 text-xs" style="color:#64748b">rainyinsaigon@vnu-hcm:~</span>
                </div>
                <!-- Terminal body -->
                <div id="term-body" class="px-5 py-4 text-sm leading-relaxed" style="color:#e2e8f0">
                    <div id="term-output"></div>
                    <span id="term-cursor" style="display:inline-block;width:8px;height:1.1em;background:#3b9eff;vertical-align:text-bottom;animation:blink 1s step-start infinite"></span>
                </div>
            </div>
            <style>
                @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
                .term-line { display: block; }
                .term-prompt { color: #3b9eff; }
                .term-cmd   { color: #e2e8f0; }
                .term-out   { color: #94a3b8; }
                .term-green { color: #4ade80; }
                .term-yellow{ color: #facc15; }
                .term-cyan  { color: #67e8f9; }
            </style>
            <script>
            (function() {
                const lines = [
                    { cls: 'term-prompt', text: '$ ', suffix: { cls: 'term-cmd', text: 'whoami' } },
                    { cls: 'term-cyan',   text: 'RainyinSaiGon' },
                    { cls: 'term-out',    text: 'CS Senior (Year 3)  ·  VNU-HCM' },
                    { cls: 'term-out',    text: '' },
                    { cls: 'term-prompt', text: '$ ', suffix: { cls: 'term-cmd', text: 'cat stack.txt' } },
                    { cls: 'term-green',  text: 'Go  ·  TypeScript  ·  Python  ·  SQL' },
                    { cls: 'term-out',    text: '' },
                    { cls: 'term-prompt', text: '$ ', suffix: { cls: 'term-cmd', text: 'cat focus.txt' } },
                    { cls: 'term-yellow', text: 'Databases  ·  Performance  ·  XAI' },
                ];

                const out = document.getElementById('term-output');
                const body = document.getElementById('term-body');

                // Pre-render all lines invisible to lock the terminal height before animating
                lines.forEach(line => {
                    const row = document.createElement('span');
                    row.className = 'term-line';
                    row.style.visibility = 'hidden';
                    if (line.text === '' && !line.suffix) {
                        row.innerHTML = '&nbsp;';
                    } else {
                        const pre = document.createElement('span');
                        pre.className = line.cls;
                        pre.textContent = line.text;
                        row.appendChild(pre);
                        if (line.suffix) {
                            const suf = document.createElement('span');
                            suf.className = line.suffix.cls;
                            suf.textContent = line.suffix.text;
                            row.appendChild(suf);
                        }
                    }
                    out.appendChild(row);
                });
                // Lock height to final content size — no reflow during typing
                body.style.height = body.offsetHeight + 'px';
                out.innerHTML = '';

                let li = 0, ci = 0;

                function typeLine() {
                    if (li >= lines.length) return; // run once, stop
                    const line = lines[li];
                    if (ci === 0) {
                        const row = document.createElement('span');
                        row.className = 'term-line';
                        out.appendChild(row);
                    }
                    const row = out.lastElementChild;
                    if (line.text === '' && !line.suffix) {
                        row.innerHTML = '&nbsp;';
                        li++; ci = 0;
                        setTimeout(typeLine, 80);
                        return;
                    }
                    typeChar();
                }

                function typeChar() {
                    if (li >= lines.length) return;
                    const line = lines[li];
                    const row = out.lastElementChild;
                    const full = line.text + (line.suffix ? line.suffix.text : '');

                    if (ci < full.length) {
                        row.innerHTML = '';
                        const pre = document.createElement('span');
                        pre.className = line.cls;
                        pre.textContent = full.slice(0, Math.min(ci + 1, line.text.length));
                        row.appendChild(pre);
                        if (line.suffix && ci >= line.text.length) {
                            const suf = document.createElement('span');
                            suf.className = line.suffix.cls;
                            suf.textContent = full.slice(line.text.length, ci + 1);
                            row.appendChild(suf);
                        }
                        ci++;
                        const isOutput = ['term-out','term-green','term-yellow','term-cyan'].includes(line.cls);
                        setTimeout(typeChar, isOutput ? 16 : 42);
                    } else {
                        li++; ci = 0;
                        const pause = (li === 4 || li === 7) ? 500 : 110;
                        setTimeout(typeLine, pause);
                    }
                }

                setTimeout(typeLine, 600);
            })();
            </script>
        </div>
    </div>

    <svg class="block w-full" style="line-height:0" viewBox="0 0 1440 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
        <path class="wave-to-alt" d="M0,0 C360,60 1080,60 1440,0 L1440,60 L0,60 Z"/>
    </svg>

    <!-- WORKS -->
    {{if .Projects}}
    <div class="section-alt py-16">
        <div class="max-w-5xl mx-auto px-10">
            <div class="flex items-baseline justify-between mb-8">
                <h2 class="text-2xl font-extrabold text-gray-900 dark:text-white">Recent works</h2>
                <a class="text-sm font-medium transition-opacity hover:opacity-70" style="color:#1a6eb5" href="/works">All works →</a>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {{range .Projects}}
                <div class="flex flex-col bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-sm border border-gray-200 dark:border-gray-700 transition-shadow hover:shadow-md">
                    {{if .Image}}<img class="w-full h-44 object-cover" src="{{.Image}}" alt="{{.Title}}">
                    {{else}}<div class="w-full h-44 section-alt"></div>{{end}}
                    <div class="flex flex-col flex-1 p-5">
                        <div class="font-bold text-base mb-2 text-gray-900 dark:text-white">{{.Title}}</div>
                        <div class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed flex-1">{{.Description}}</div>
                        <div class="flex gap-3 mt-4">
                            {{if .CodeURL}}<a class="text-xs font-semibold px-3 py-1 rounded-md border border-blue-500 transition-colors hover:bg-blue-50 dark:hover:bg-blue-950" style="color:#1a6eb5;border-color:#1a6eb5" href="{{.CodeURL}}">Code</a>{{end}}
                            {{if .DemoURL}}<a class="text-xs font-semibold px-3 py-1 rounded-md border transition-colors hover:bg-blue-50 dark:hover:bg-blue-950" style="color:#1a6eb5;border-color:#1a6eb5" href="{{.DemoURL}}">Demo</a>{{end}}
                        </div>
                    </div>
                </div>
                {{end}}
            </div>
        </div>
    </div>
    {{end}}

    <svg class="block w-full" style="line-height:0" viewBox="0 0 1440 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
        <path class="wave-from-alt" d="M0,60 C360,0 1080,0 1440,60 L1440,0 L0,0 Z"/>
    </svg>

    <!-- POSTS -->
    {{if .Posts}}
    <div class="py-16 bg-white dark:bg-gray-950">
        <div class="max-w-5xl mx-auto px-10">
            <div class="flex items-baseline justify-between mb-8">
                <h2 class="text-2xl font-extrabold text-gray-900 dark:text-white">Latest posts</h2>
                <a class="text-sm font-medium transition-opacity hover:opacity-70" style="color:#1a6eb5" href="/blog">All posts →</a>
            </div>
            <ul class="divide-y divide-gray-200 dark:divide-gray-800">
                {{range .Posts}}
                <li class="flex items-baseline gap-6 py-4 group">
                    <span class="text-sm text-gray-400 whitespace-nowrap w-28 shrink-0">{{.Date}}</span>
                    <a class="font-semibold text-gray-900 dark:text-gray-100 group-hover:text-blue dark:group-hover:text-blue-light transition-colors" href="/blog/{{.Slug}}">{{.Title}}</a>
                </li>
                {{end}}
            </ul>
        </div>
    </div>
    {{end}}

    {{template "footer" .}}
</body>
</html>{{end}}
