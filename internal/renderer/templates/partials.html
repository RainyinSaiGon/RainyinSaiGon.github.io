{{define "head"}}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="alternate" type="application/rss+xml" title="RainyinSaiGon RSS" href="/rss.xml">
<link rel="stylesheet" href="/tailwind.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Display:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/style.css">
<script>
  // Apply saved dark mode preference before paint to prevent flash
  (function() {
    if (localStorage.getItem('theme') === 'dark' ||
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  })();
</script>
{{end}}

{{define "nav-home"}}
<nav class="flex items-center justify-between px-10 py-5 max-w-5xl mx-auto">
    <a class="font-bold text-lg hover:opacity-70 transition-opacity" style="color:#0d2a4a" href="/">
        <span class="dark:hidden">RainyinSaiGon</span>
        <span class="hidden dark:inline" style="color:#7eb8f7">RainyinSaiGon</span>
    </a>
    <div class="flex items-center gap-6">
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/works">Works</a>
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/blog">Blog</a>
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/about">About</a>
        <a class="text-gray-500 dark:text-gray-400 hover:text-blue dark:hover:text-blue-light transition-colors" href="/search" title="Search posts" aria-label="Search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </a>
        <button onclick="toggleTheme()" class="w-8 h-8 flex items-center justify-center rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" title="Toggle dark mode" aria-label="Toggle dark mode">
            <!-- Moon: shown in light mode -->
            <svg class="dark:hidden" width="17" height="17" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>
            <!-- Sun: shown in dark mode -->
            <svg class="hidden dark:block" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
    </div>
</nav>
{{end}}

{{define "nav-inner"}}
<nav class="flex items-center justify-between px-10 py-5 max-w-5xl mx-auto border-b border-gray-200 dark:border-gray-800">
    <a class="font-bold text-lg hover:opacity-70 transition-opacity" style="color:#0d2a4a" href="/">
        <span class="dark:hidden">RainyinSaiGon</span>
        <span class="hidden dark:inline" style="color:#7eb8f7">RainyinSaiGon</span>
    </a>
    <div class="flex items-center gap-6">
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/works">Works</a>
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/blog">Blog</a>
        <a class="font-medium text-gray-700 dark:text-gray-300 hover:text-blue dark:hover:text-blue-light transition-colors" href="/about">About</a>
        <a class="text-gray-500 dark:text-gray-400 hover:text-blue dark:hover:text-blue-light transition-colors" href="/search" title="Search posts" aria-label="Search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </a>
        <button onclick="toggleTheme()" class="w-8 h-8 flex items-center justify-center rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" title="Toggle dark mode" aria-label="Toggle dark mode">
            <svg class="dark:hidden" width="17" height="17" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>
            <svg class="hidden dark:block" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
    </div>
</nav>
{{end}}

{{define "footer"}}
<footer class="max-w-5xl mx-auto px-10 py-8 mt-20 border-t border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 text-sm">
    <div class="flex flex-wrap items-center justify-between gap-4">
        <p>Â© 2026 RainyinSaiGon. Licensed under <a class="underline hover:text-blue" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p>
        <div class="flex gap-5">
            <a class="hover:text-blue" href="https://github.com/RainyinSaiGon">GitHub</a>
            <a class="hover:text-blue" href="/rss.xml">RSS</a>
            <a class="hover:text-blue" href="/sitemap.xml">Sitemap</a>
        </div>
    </div>
</footer>
<script>
function toggleTheme() {
    const html = document.documentElement;
    if (html.classList.contains('dark')) {
        html.classList.remove('dark');
        localStorage.setItem('theme', 'light');
    } else {
        html.classList.add('dark');
        localStorage.setItem('theme', 'dark');
    }
}
</script>
{{end}}
